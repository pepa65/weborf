// options.h.in
// Weborf copyright 2007 (GPL3+) Salvo "LtWorf" Tomaselli <tiposchi@tiscali.it>
// Some modification in this branch: pepa65 <solusos@passchier.net>

#include "config.h"
#include <unistd.h> //Needed because it defines the _POSIX_IPV6

#ifndef WEBORF_OPTIONS_H
#define WEBORF_OPTIONS_H

// System
#define ROOTUID 0               // UID for superuser
#define ROOTGID 0               // GID for superuser

// Network
#define MAXQ 40                 // Queue for connect requests
#define PORT "8080"             // Default port

#ifdef _POSIX_IPV6              // Enables ipv6 if supported
// Delete or comment-out the following line to disable IPv6
#define IPV6
#endif

// Threads
#define MAXTHREAD 300           // Max threads
#define INITIALTHREAD 12        // Thread started when free threads are low and when starting
#define LOWTHREAD 3             // Minimum number of free threads, before starting new ones
#define MAXFREETHREAD 12        // Maximum number of free threads, before starting to slowly close them
#define THREADCONTROL 10        // Polling frequence in seconds

// Server
//#define INDEX "index.html"    // If default index file not set, no serving them unless given with -I
// If BASEDIR is undefined then it will be set to $PWD on runtime
//#define BASEDIR "/var/www"    // Default basedir
#define READ_TIMEOUT 5000       // Timeout before closing inactive keep-alive connections, in milliseconds

// Buffers
#define SIZEU 12                // Size for filesize plus unit
#define INBUFFER 1024           // Size for buffer with the HTTP request
#define FILEBUF 4096            // Size of reads
#define MAXSCRIPTOUT 20480000   // Maximum size for a page generated by a script or internally
#define HEADBUF 1024            // Buffer for headers
#define PWDLIMIT 300            // Max size for password
#define INDEXMAXLEN 30
#define NBUFFER 15              // Buffer to contain the string representation of an integer
#define RBUFFER 128             // Buffer to contain a range
#define BUFFERED_READER_SIZE 2048
#define DATEBUFFER 50           // Buffer for text date
#define URI_LEN 256             // Max fname 256 (on linux)
#define PATH_LEN 1024
#define HREF_NLEN URI_LEN*3+1   // Size of escaped filename
#define HTML_NLEN URI_LEN*6+1   // Size of escaped filename (fname max 256 on linux)
#define MIMETYPELEN 15          // Size of mimetype string

// Number of index pages allowed to search
#define MAXINDEXCOUNT 10

// LIMITS
#define POST_MAX_SIZE 4000000   // Maximum allowed size for POST data

// HTML
#define HTMLHEAD "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//\
EN\">\n<html><head><meta http-equiv=\"Content-Type\" content=\"text/html; \
charset=UTF-8\" /><meta http-equiv=\"pragma\" content=\"no-cache\" /><title>"

#define CSS "body{font-family:Arial,sans-serif; background-color:#eee;} \
a,a:active{text-decoration:none; color:#116;} \
a:visited{color:#416;} \
a:hover,a:focus{text-decoration:none;} \
.foot{font-size:80%; color:#666; margin: 4px 0 600px;} \
h1{color:#f00;} \
h2{margin-bottom:12px;} \
h4{color:#333;} \
.s,.s{text-align:right;} \
.head{width:100%; font-size:160%; font-weight:bold;} \
.head td{padding:0;} \
.head td:first-child{width:1%; padding:0;} \
.head a{color:#333;} \
.head td:first-child a{color:#666;} \
th,td{font-size:80%; text-align:left; overflow:hidden;} \
th{padding-right:14px; padding-bottom:3px;} \
td{padding-right:14px; padding-left:5px;} \
td a{display:block; margin:-10em; padding:10em;} \
td a:hover{background-color:#ffd;} \
.list{background-color:#fff; border-top:1px solid #666; border-bottom:1px solid #666; padding:8px 12px 12px 12px;} \
.i{font-style:italic;} \
.b{font-weight:bold;} \
.darker{background-color:#bbb;} \
.dark{background-color:#ddd;} \
.light{background-color:#fff;} \
.date{font:70% monospace;} \
.size{font:80% monospace;}"

#define HTMLFOOT "</div><a href=\"" PACKAGE_URL "\" title=\"" PACKAGE_NAME " github page\"><p class=\"foot\">" PACKAGE_STRING "</p></a></body></html>"

#define COPYRIGHT "© Copyright 2007-2017 Salvo 'LtWorf' Tomaselli\n\
© Copyright 2016-2018 pepa65 <solusos@passchier.net\n\
This is free software.  You may redistribute copies of it under the terms of\n\
the GNU General Public License <http://www.gnu.org/licenses/gpl.html>.\n\
There is NO WARRANTY, to the extent permitted by law.\n\
\n\
Written by Salvo 'LtWorf' Tomaselli and Salvo Rinaldi.\n\
Synchronized queue by Prof. Giuseppe Pappalardo\n\
Modifications by pepa65 <" PACKAGE_BUGREPORT ">\n\
Repo at " PACKAGE_URL "\n"

// SCRIPTS
#define SCRPT_TIMEOUT 30        // Timeout for the scripts, in seconds
#define HIDE_CGI_ERRORS         // Hides all the errors

//#define CGI_PHP "@cgibindir@/php"
//#define CGI_PY "@cgibindir@/weborf_py_wrapper"
#define CGI_PHP "/usr/lib/cgi-bin/php"
#define CGI_PY "/usr/local/lib/cgi-bin/weborf_py_wrapper"

// COMPRESSING PAGES
//#define __COMPRESSION         // Comment to disable support for compressing pages
#ifdef __COMPRESSION
#define SIZE_COMPRESS_MIN 512
#define SIZE_COMPRESS_MAX 4000000000
#define GZIPNICE 4              // Nice value for gzip process
#endif

// The following header can be disabled to increase speed
//#define SEND_LAST_MODIFIED_HEADER

#ifdef HAVE_LIBMAGIC
#define SEND_MIMETYPES          // Enables support to sending the mimetype to the client
#endif

// RANGE
#define __RANGE                 // Enables support to range (partial download)

// WEBDAV
#define WEBDAV                  // Enables webdav support
#ifdef WEBDAV
#define MAXPROPCOUNT 40         // Number of supported properties
#define HIDE_HIDDEN_FILES       // Hides hidden files
#endif

// Logging options
#define THREADDBG
#define SOCKETDBG
#define SENDINGDBG
#define SERVERDBG
#define REQUESTDBG

#endif
